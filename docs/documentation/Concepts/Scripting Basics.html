<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-documentation/Concepts/Scripting Basics">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Scripting Basics 脚本基础 | Origami 研习社</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kuaimeizheng.github.io/OrigamiStudio/docs/documentation/Concepts/Scripting Basics"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="origami, origami studio, prototype, 交互, 动效, 原型"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Scripting Basics 脚本基础 | Origami 研习社"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/OrigamiStudio/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kuaimeizheng.github.io/OrigamiStudio/docs/documentation/Concepts/Scripting Basics"><link data-rh="true" rel="alternate" href="https://kuaimeizheng.github.io/OrigamiStudio/docs/documentation/Concepts/Scripting Basics" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://kuaimeizheng.github.io/OrigamiStudio/docs/documentation/Concepts/Scripting Basics" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/OrigamiStudio/blog/rss.xml" title="Origami 研习社 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/OrigamiStudio/blog/atom.xml" title="Origami 研习社 Atom Feed"><link rel="stylesheet" href="/OrigamiStudio/assets/css/styles.5f380642.css">
<link rel="preload" href="/OrigamiStudio/assets/js/runtime~main.19cc27ee.js" as="script">
<link rel="preload" href="/OrigamiStudio/assets/js/main.f829999a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/OrigamiStudio/"><div class="navbar__logo"><img src="/OrigamiStudio/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OrigamiStudio/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OrigamiStudio</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/OrigamiStudio/docs/documentation/intro">中文文档</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/patches/intro">模块</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/tutorial/intro">教程</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/system/intro">组件系统</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/special/intro">专题</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/device/intro">设备</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/research/intro">技术探索</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/motion/intro">动画模块</a><a class="navbar__item navbar__link" href="/OrigamiStudio/docs/shortcuts">键盘快捷键</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/OrigamiStudio/blog">关于作者</a><a href="https://github.com/kuaimeizheng/OrigamiStudio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OrigamiStudio/docs/documentation/intro">Intrduction 介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/canvas-画布">Canvas 画布</a><button aria-label="打开/收起侧边栏菜单「Canvas 画布」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/patch-editor-模块编辑器">Patch Editor 模块编辑器</a><button aria-label="打开/收起侧边栏菜单「Patch Editor 模块编辑器」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/workflow-工作流">Workflow 工作流</a><button aria-label="打开/收起侧边栏菜单「Workflow 工作流」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/OrigamiStudio/docs/category/concepts-概念">Concepts 概念</a><button aria-label="打开/收起侧边栏菜单「Concepts 概念」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/Coordinates">Coordinates 坐标</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/JavaScript Patch API">JavaScript Patch API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/Loop">Loop 循环</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/Math Expressions">Math Expressions 数学表达式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/Scripting Basics">Scripting Basics 脚本基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/States &amp; Pulses">States &amp; Pulses 状态 &amp; 脉冲</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OrigamiStudio/docs/documentation/Concepts/Variables">Variables 变量</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/animation-动画">Animation 动画</a><button aria-label="打开/收起侧边栏菜单「Animation 动画」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/color-颜色">Color 颜色</a><button aria-label="打开/收起侧边栏菜单「Color 颜色」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/data-数据">Data 数据</a><button aria-label="打开/收起侧边栏菜单「Data 数据」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/device-设备">Device 设备</a><button aria-label="打开/收起侧边栏菜单「Device 设备」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/interaction-交互">Interaction 交互</a><button aria-label="打开/收起侧边栏菜单「Interaction 交互」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/logic-逻辑">Logic 逻辑</a><button aria-label="打开/收起侧边栏菜单「Logic 逻辑」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/loops-循环">Loops 循环</a><button aria-label="打开/收起侧边栏菜单「Loops 循环」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/math-数学">Math 数学</a><button aria-label="打开/收起侧边栏菜单「Math 数学」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/media-媒体">Media 媒体</a><button aria-label="打开/收起侧边栏菜单「Media 媒体」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/shapes-形状">Shapes 形状</a><button aria-label="打开/收起侧边栏菜单「Shapes 形状」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/text-文本">Text 文本</a><button aria-label="打开/收起侧边栏菜单「Text 文本」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/utility-实用">Utility 实用</a><button aria-label="打开/收起侧边栏菜单「Utility 实用」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/layer-图层">Layer 图层</a><button aria-label="打开/收起侧边栏菜单「Layer 图层」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/effect-效果">Effect 效果</a><button aria-label="打开/收起侧边栏菜单「Effect 效果」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/material-谷歌移动端">Material 谷歌移动端</a><button aria-label="打开/收起侧边栏菜单「Material 谷歌移动端」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/OrigamiStudio/docs/category/ios-苹果移动端">iOS 苹果移动端</a><button aria-label="打开/收起侧边栏菜单「iOS 苹果移动端」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/OrigamiStudio/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/OrigamiStudio/docs/category/concepts-概念"><span itemprop="name">Concepts 概念</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Scripting Basics 脚本基础</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Scripting Basics 脚本基础</h1><hr><p>The Patch Editor offers a robust and flexible <a href="https://origami.design/tutorials/getting-started/coming-from-code.html" target="_blank" rel="noopener noreferrer">programming environment</a> in Origami. However there are times when traditional imperative programming can be a better solution.</p><p>模块编辑器在 Origami 中提供了一个强大灵活的<a href="https://origami.design/tutorials/getting-started/coming-from-code.html" target="_blank" rel="noopener noreferrer">编程环境</a>。然而，有时传统的命令式编程可能是更好的解决方案。</p><p>Thanks to the new Javascript Patch, Origami can now directly run JavaScript (<a href="https://github.com/facebook/hermes/blob/main/doc/Features.md" target="_blank" rel="noopener noreferrer">ES6<!-- -->*</a>) via its Hermes runtime.</p><p>多亏了新的 Javascript 模块，Origami 现在可以通过 Hermes 运行时直接运行 Javascript (<a href="https://github.com/facebook/hermes/blob/main/doc/Features.md" target="_blank" rel="noopener noreferrer">ES6<!-- -->*</a>)。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-a-script-into-origami-在-origami-中编写脚本">Getting a script into Origami 在 Origami 中编写脚本<a class="hash-link" href="#getting-a-script-into-origami-在-origami-中编写脚本" title="标题的直接链接">​</a></h2><p>There are two ways to add a JavaScript Patch into Origami:</p><p>有两种方法添加 JavaScript 模块到 Origami:</p><video src="https://origami.design/public/images/videos/scripting-droppingJSPatch.mov
" height="500" width="100%" autoplay="" loop="" align="left"></video><p>Drag and drop a valid .js file into the patch graph</p><p>将有效的.js 文件拖放到模块图中</p><video src="https://origami.design/public/images/videos/scripting-addJs.mov
" height="500" width="100%" autoplay="" loop=""></video><p>Insert a JavaScript Patch via the Patch Picker.</p><p>通过模块选择器插入 JavaScript 模块。</p><p>The result will be a new custom patch in the patch editor that contains the inputs logic and outputs defined by the script.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started-快速开始">Getting started 快速开始<a class="hash-link" href="#getting-started-快速开始" title="标题的直接链接">​</a></h2><p>This basic example script, recreating a <a href="https://origami.design/documentation/patches/builtin.splitter.html" target="_blank" rel="noopener noreferrer">splitter</a>, illustrates the elements needed to create a working Javascript File patch.</p><p>结果将在模块编辑器中生成一个新的自定义模块，其中包含脚本定义的输入逻辑和输出。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var patch = new Patch();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.inputs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new PatchInput(&quot;Input&quot;, types.NUMBER, 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.outputs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new PatchOutput(&quot;Output&quot;, types.NUMBER),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.alwaysNeedsToEvaluate = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.loopAware = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.evaluate = function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  patch.outputs[0].value = patch.inputs[0].value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return patch;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-down-the-necessary-pieces-of-a-script-分解步骤的必要部分">Breaking down the necessary pieces of a script: 分解步骤的必要部分:<a class="hash-link" href="#breaking-down-the-necessary-pieces-of-a-script-分解步骤的必要部分" title="标题的直接链接">​</a></h3><ol><li>Create the patch object. 创建模块对象</li><li>Define its inputs and outputs. 定义其输入和输出</li><li>Set the patch properties. (optional) 设置模块属性。(可选)</li><li>Add logic. 添加逻辑<ul><li>Reading and writing values. 读写值</li></ul></li><li>Return the patch object. 返回模块对象</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-patch-object-创建模块对象">Create the patch object. 创建模块对象<a class="hash-link" href="#create-the-patch-object-创建模块对象" title="标题的直接链接">​</a></h4><p>The first step is to create an object of the class <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patch" target="_blank" rel="noopener noreferrer">Patch</a>. This class is the interface provided to execute any JavaScript.</p><p>第一步是创建类<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patch" target="_blank" rel="noopener noreferrer">Patch</a>的对象。这个类是用来执行任何 JavaScript 的接口。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var patch = new Patch();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="define-its-inputs-and-outputs-定义其输入和输出">Define its inputs and outputs. 定义其输入和输出<a class="hash-link" href="#define-its-inputs-and-outputs-定义其输入和输出" title="标题的直接链接">​</a></h4><p><code>inputs</code>is an array of <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchinput" target="_blank" rel="noopener noreferrer">PatchInput</a> and similarly <code>outputs</code> is an array of <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchoutput" target="_blank" rel="noopener noreferrer">PatchOutput</a>. Create a port with Name, Type and optionally a default value. The order of each port in the array is the one that will be shown when this is converted into a patch (see image below)</p><p><code>inputs</code>是<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchinput" target="_blank" rel="noopener noreferrer">PatchInput</a>的数组，同样<code>outputs</code>是<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchoutput" target="_blank" rel="noopener noreferrer">PatchOutput</a>的数组。创建一个带有 Name、Type 和可选默认值的端口。数组中每个端口的顺序将在转换为模块时显示(见下图)</p><p>A list of the types available in the Javascript File patch can be found here: <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#types" target="_blank" rel="noopener noreferrer">Types</a></p><p>Javascript 文件模块中可用的类型列表可以在这里找到:<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#types" target="_blank" rel="noopener noreferrer">types</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">patch.inputs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new PatchInput(&quot;Input&quot;, types.NUMBER, 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.outputs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> new PatchOutput(&quot;Output&quot;, types.NUMBER),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="patch-container"><div class="patch processor"><h3>Javscript Patch</h3><ul class="inputs"><li>Input <span>0</span></li></ul><ul class="outputs"><li>Output <span>0</span></li></ul></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-the-patch-properties-设置模块属性">Set the patch properties. 设置模块属性<a class="hash-link" href="#set-the-patch-properties-设置模块属性" title="标题的直接链接">​</a></h4><p>There are a few properties that can change how a patch is evaluated. (<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchloopaware-boolean-default-false" target="_blank" rel="noopener noreferrer">loopAware</a>, <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchalwaysneedstoevaluate-boolean-default-false" target="_blank" rel="noopener noreferrer">alwaysNeedsToEvaluate</a>) This step is optional, as these properties already have a default value of false.</p><p>有几个属性可以改变评估模块的方式。这一步是可选的，因为这些属性已经有了默认值 false。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">patch.alwaysNeedsToEvaluate = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.loopAware = false;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-logic-添加逻辑">Add logic. 添加逻辑<a class="hash-link" href="#add-logic-添加逻辑" title="标题的直接链接">​</a></h4><p>Every patch object must provide an evaluate function. This function doesn’t take any arguments and doesn’t return any values; the expectation is to read from the input ports and write to the output ports instead.</p><p>每个模块对象必须提供一个 evaluate 函数。这个函数不接受任何参数，也不返回任何值；我们期望从输入端口读取数据，并向输出端口写入数据。</p><p>This evaluate function is the place to add the core functionality of the patch. The evaluate function will run any time at least one of the inputs changes. Unless the property<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchalwaysneedstoevaluate-boolean-default-false" target="_blank" rel="noopener noreferrer">alwaysNeedsToEvaluate</a> is set to <code>true.</code></p><p>这个评估函数是添加模块核心功能的地方。只要至少一个输入发生变化，evaluate 函数就会运行。除非属性<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchalwaysneedstoevaluate-boolean-default-false" target="_blank" rel="noopener noreferrer">alwaysNeedsToEvaluate</a>被设置为&#x27; true &#x27;。</p><p>In that case the evaluate function will be called every frame. A great deal of effort has been put into making Origami run as efficiently as possible by using a highly optimized evaluation schedule, so for most cases this should be set to <code>false</code>.</p><p>在这种情况下，每一帧都会调用 evaluate 函数。为了使 Origami 尽可能高效地运行，我们已经投入了大量的精力，使用高度优化的评估时间表，所以在大多数情况下，这应该被设置为<code>false</code>。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">patch.evaluate = function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Add logic here...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reading-and-writing-values-读写值">Reading and writing values. 读写值<a class="hash-link" href="#reading-and-writing-values-读写值" title="标题的直接链接">​</a></h4><p>In order to read the value of an input the script needs to reference the <code>inputs</code> array by index. For example: to read the value of the first input: <code>patch.inputs[0].value;</code></p><p>为了读取输入的值，脚本需要通过索引引用“输入”数组。例如:读取第一个输入的值：<code>patch.inputs[0].value; </code></p><p>Output values are set in a similar way, by assigning the value to the index of the <code>outputs</code> array. For example to write something on the first output: <code>patch.outputs[0].value = 10;</code></p><p>输出值也以类似的方式设置，即将值赋给&#x27; outputs &#x27;数组的索引。例如，在第一个输出上写一些东西：<code>patch.outputs[0]。值= 10;</code></p><p>For looped values use the <code>values</code> property (instead of just <code>value</code>). The <code>values</code> property makes it possible to read or write an Array of values to represent your looped values.</p><p>对于循环值，使用<code>values</code>属性(instead of just <code>value</code>)。<code>values</code>属性可以读取或写入一个数组的值来表示循环的值。</p><p>see more details on <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchinput" target="_blank" rel="noopener noreferrer">PatchInput</a> and <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchoutput" target="_blank" rel="noopener noreferrer">PatchOutput</a></p><p>详情可查看<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchinput" target="_blank" rel="noopener noreferrer">PatchInput</a> 和 <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#patchoutput" target="_blank" rel="noopener noreferrer">PatchOutput</a>。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-the-object-返回对象">Return the object. 返回对象<a class="hash-link" href="#return-the-object-返回对象" title="标题的直接链接">​</a></h4><p>Finally we need to return the Patch object fully configured. Origami uses <a href="https://www.javascripttutorial.net/javascript-immediately-invoked-function-expression-iife/" target="_blank" rel="noopener noreferrer">IIFE</a> as a mechanism to load the Patch. That’s why returning the patch at the end is very important or Origami will throw an error.</p><p>最后，我们需要返回完全配置的 Patch 对象。Origami 使用<a href="https://www.javascripttutorial.net/javascript-immediately-invoked-function-expression-iife/" target="_blank" rel="noopener noreferrer">IIFE</a>作为加载模块的机制。这就是为什么在最后返回模块是非常重要的，否则 Origami 将抛出一个错误。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">return patch;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-例子">Example 例子<a class="hash-link" href="#example-例子" title="标题的直接链接">​</a></h2><p>Validating an email can become very complicated with patches, whereas Imperative programming can easily check for the characters needed for a valid email address.</p><p>使用模块验证电子邮件可能变得非常复杂，而命令式编程可以轻松检查有效电子邮件地址所需的字符。</p><p>Another advantage is that there are many more snippets of code in the internet that uses Imperative programming. For example a quick search for <a href="https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address" target="_blank" rel="noopener noreferrer">how to validate an email with regular expressions</a></p><p>另一个优点是在网上有更多的命令式编程的代码片段。例如，快速搜索<a href="https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address" target="_blank" rel="noopener noreferrer">如何用正则表达式验证电子邮件</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var patch = new Patch();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.inputs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new PatchInput(&quot;Email&quot;, types.STRING, &quot;&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.outputs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new PatchOutput(&quot;Valid&quot;, types.BOOLEAN, false),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch.evaluate = function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const regexp =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  new RegExp(\[&quot;\[a-zA-Z0-9.!#$%&amp;&#x27;*+\\/=?^_`{|}~-\]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &#x27;+@\[a-zA-Z0-9\](?:\[a-zA-Z0-9-\]{0,61}\[a-zA-Z0-9\])&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &#x27;?(?:\\.\[a-zA-Z0-9\](?:\[a-zA-Z0-9-\]{0,61}&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &#x27;\[a-zA-Z0-9\])?)*$&#x27;\].join(&#x27;&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  patch.outputs\[0\].value = regexp.test(patch.inputs\[0\].value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return patch;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This script generates a single patch that easily checks if an input string has a valid email format.</p><p>这个脚本生成一个模块，可以轻松检查输入字符串是否具有有效的电子邮件格式。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-调试">Debugging 调试<a class="hash-link" href="#debugging-调试" title="标题的直接链接">​</a></h2><p>Currently there are no proper tools to debug a JavaScript Patch such as Breakpoints. However it is possible to output messages to the Origami’s JavaScript Console by using <code>console.log(...)</code> .</p><p>目前还没有合适的工具来调试 JavaScript 模块，比如断点。然而，通过使用<code>Console .log(…)</code>可以将消息输出到 Origami 的 JavaScript 控制台。</p><p>The JavaScript Console can be found in the View Menu under Hide/Show JavaScript Console.</p><p>JavaScript 控制台可以在隐藏/显示 JavaScript 控制台的视图菜单中找到。</p><p>Once the console is open It will display the log messages from the last JavaScript patch selected.</p><p>一旦控制台打开，它将显示来自选定的最后一个 JavaScript 模块的日志消息。</p><p>JavaScript Console messages will come directly from the patch’s code, or from warnings or errors in the Script.</p><p>JavaScript 控制台消息将直接来自模块的代码，或者来自脚本中的警告或错误。</p><p>For example take this code: <code>patch.outputs[0].value = [];</code></p><p>例如，下面这段代码:<code>patch.outputs[0]。值=[];</code></p><p>This will try to write an array to a single value. Thus the console will output the following warning: <code>WARNING: Could not convert a JavaScript value into an appropriate Origami type. Ignoring.</code></p><p>这将尝试将一个数组写入单个值。因此控制台将输出以下警告:<code>警告:无法将JavaScript值转换为适当的Origami类型。忽略.</code></p><p>Logging messages can accumulate quickly and Origami sets a max <a href="https://origami.design/documentation/concepts/scriptingbasics?fbclid=IwAR2y3vdZaoLrtlUoA-bio42zeWZefYd7vM6HPB4nnA-kGnxJTJPtxXmuBoo#maximum-log-messages" target="_blank" rel="noopener noreferrer">limit</a> on them. This can make messages hard to track.</p><p>日志消息可以快速累积，Origami 为它们设置了一个最大<a href="https://origami.design/documentation/concepts/scriptingbasics?fbclid=IwAR2y3vdZaoLrtlUoA-bio42zeWZefYd7vM6HPB4nnA-kGnxJTJPtxXmuBoo#maximum-log-messages" target="_blank" rel="noopener noreferrer">限制</a>。这可能会使信息难以跟踪。</p><p>For this reason, Origami provides an additional method on <code>console</code> called <code>watch</code> . This works well for tracking specific variables through different evaluation cycles. For example:</p><p>因此，Origami 在<code>console</code>上提供了一个额外的方法，称为<code>watch</code>。这对于通过不同的评估周期跟踪特定变量非常有效。例如:</p><video src="https://origami.design/public/images/videos/scripting-console-log.mov" height="500" width="100%" autoplay="" loop=""></video><video src="https://origami.design/public/images/videos/scripting-console-watch.mov" height="500" width="100%" autoplay="" loop=""></video><h2 class="anchor anchorWithStickyNavbar_LWe7" id="modifying-a-script-修改脚本">Modifying a Script 修改脚本<a class="hash-link" href="#modifying-a-script-修改脚本" title="标题的直接链接">​</a></h2><p>Right clicking on any JavaScript patch will present the option to “<em>Open in default editor</em>“</p><p>右键单击任何 JavaScript 模块都会出现 “<em>在默认编辑器中打开</em>” 选项。</p><p><img loading="lazy" src="https://origami.design/public/images/documentation/scripting-editjsPatch.png" alt="img" class="img_ev3q"></p><p>Make sure you have a proper editor configured. It is very common that Chrome (or Safari) is the default app to open JavaScript files, but those are not editors. Check on <a href="https://www.imore.com/how-set-mac-app-default-when-opening-file" target="_blank" rel="noopener noreferrer">how to change the default app for any file type</a>.</p><p>确保配置了正确的编辑器。Chrome(或 Safari)通常是打开 JavaScript 文件的默认应用程序，但它们不是编辑器。查看<a href="https://www.imore.com/how-set-mac-app-default-when-opening-file" target="_blank" rel="noopener noreferrer">如何为任何文件类型更改默认应用程序</a>。</p><p>Alternatively in the same contextual menu there’s the option to “<em>Open With</em>” Which lets you select from a list of possible apps that can edit a JavaScript file.</p><p>此外，在相同的上下文菜单中还有一个选项 “<em>Open With</em>” ，它可以让你从可以编辑 JavaScript 文件的应用程序列表中进行选择。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="considerations-when-modifying-a-script-修改脚本时的注意事项">Considerations when modifying a script. 修改脚本时的注意事项。<a class="hash-link" href="#considerations-when-modifying-a-script-修改脚本时的注意事项" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="origami-must-be-opened-at-all-times-while-editing-a-javascript-patch-origami-必须在编辑-javascript-模块时一直打开">Origami must be opened at all times while editing a JavaScript Patch. Origami 必须在编辑 JavaScript 模块时一直打开。<a class="hash-link" href="#origami-must-be-opened-at-all-times-while-editing-a-javascript-patch-origami-必须在编辑-javascript-模块时一直打开" title="标题的直接链接">​</a></h4><p>Modifying a script could involve also changing the structure of the Patch. For example adding inputs or outputs. Those changes need to be reflected in the patch graph because of that Origami needs to be open to be able to process those changes. Any changes made outside this workflow could be missed or cause malfunction on the prototype.</p><p>修改脚本还可能涉及修改模块的结构。</p><p>例如，增加输入或输出。这些变化需要反映在模块图中，因为 Origami 需要是开放的，以便能够处理这些变化。在此工作流之外所做的任何更改都可能被遗漏或导致原型出现故障。</p><p>Be aware that once you close Origami. The JavaScript file you were editing is deleted. You should not try to reuse that file. Depending on the editor being used it could be more or less prominent the fact that is not safe to keep editing the file at that path. For example notice in VS Code it shows in the title the file has been deleted.</p><p>注意，一旦你关闭 Origami。您正在编辑的 JavaScript 文件被删除。</p><p>您不应该尝试重用该文件。根据所使用的编辑器，在该路径上继续编辑文件是不安全的这一事实可能或多或少会很突出。例如，在 VS Code 中，它在标题中显示文件已被删除。</p><p><img loading="lazy" src="https://origami.design/public/images/documentation/scripting-deletedFile.png" alt="img" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="effectively-modifying-inputs--outputs-有效修改输入和输出">Effectively modifying inputs &amp; outputs. 有效修改输入和输出。<a class="hash-link" href="#effectively-modifying-inputs--outputs-有效修改输入和输出" title="标题的直接链接">​</a></h4><p>When modifying the inputs or outputs on a JavaScript Patch that already has connections. It is important to remember that it is safe to change the name or even the type of the Port and Origami will keep the connections. In general as long as the order of the ports stays the same, the connections can be preserved. Removing an input and then re-adding it would lose any previous connection.</p><p>当修改已连接的 JavaScript 模块上的输入或输出时。重要的是要记住，更改端口的名称甚至类型是安全的，Origami 将保持连接。</p><p>一般来说，只要端口的顺序保持不变，就可以保持连接。删除一个输入然后重新添加它会丢失之前的任何连接。</p><p>Changing the order of two ports is effectively the same as renaming them. Since the access of the ports is always by index.</p><p>改变两个端口的顺序实际上与重命名它们相同。因为访问端口总是通过索引。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="duplicated-javascript-patch-复制-javascript-模块">Duplicated JavaScript Patch. 复制 JavaScript 模块。<a class="hash-link" href="#duplicated-javascript-patch-复制-javascript-模块" title="标题的直接链接">​</a></h4><p>Duplicated JavaScript Patches point to the same file source. Therefore modifying the file would have effect in all those same patches. This only happens within the context of a same file. Copy/Paste a JavaScript Patch to a different file creates a completely new JavaScript file.</p><p>重复的 JavaScript 模块指向相同的文件源。因此，修改该文件将在所有这些相同的模块中生效。</p><p>这只发生在同一个文件的上下文中。复制/粘贴一个 JavaScript 模块到另一个文件将创建一个全新的 JavaScript 文件。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="limitations-限制">Limitations 限制<a class="hash-link" href="#limitations-限制" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hostbrowser-calls-主机浏览器调用">Host/Browser calls. 主机/浏览器调用。<a class="hash-link" href="#hostbrowser-calls-主机浏览器调用" title="标题的直接链接">​</a></h3><p>It is very common to see JS code that uses calls like <code>alert(...)</code> or <code>document.getElementById(...)</code>, etc</p><p>经常会看到 JS 代码使用<code>alert(…)</code>或<code>document.getElementById(…)</code>等调用</p><p>These methods are specific to a browser <a href="https://www.w3schools.com/js/js_window.asp" target="_blank" rel="noopener noreferrer">BOM</a> or to HTML <a href="https://www.w3schools.com/js/js_htmldom.asp" target="_blank" rel="noopener noreferrer">DOM</a>. And for that reason they aren’t part of the JavaScript language itself and therefore not supported in Origami.</p><p>这些方法是特定于浏览器<a href="https://www.w3schools.com/js/js_window.asp" target="_blank" rel="noopener noreferrer">BOM</a>或 HTML <a href="https://www.w3schools.com/js/js_htmldom.asp" target="_blank" rel="noopener noreferrer">DOM</a>的。因此，它们不是 JavaScript 语言本身的一部分，因此 Origami 不支持它们。</p><p>Other similar unsupported APIs that aren’t part of JavaScript but provided by browsers are: Ajax, WebWorkers, WebStorage, Canvas, etc.</p><p>其他类似的不受支持的 api，不是 JavaScript 的一部分，但由浏览器提供:Ajax, WebWorkers, WebStorage, Canvas 等。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modules-模块">Modules 模块<a class="hash-link" href="#modules-模块" title="标题的直接链接">​</a></h3><p>It is not possible to split your script in multiple files and import modules. The whole code must be contained within the same file and must comply with the steps outlined in <a href="https://origami.design/documentation/concepts/scriptingbasics?fbclid=IwAR2y3vdZaoLrtlUoA-bio42zeWZefYd7vM6HPB4nnA-kGnxJTJPtxXmuBoo#getting-started" target="_blank" rel="noopener noreferrer">Getting Started</a>.</p><p>不可能将脚本拆分为多个文件并导入模块。整个代码必须包含在同一个文件中，并且必须符合<a href="https://origami.design/documentation/concepts/scriptingbasics?fbclid=IwAR2y3vdZaoLrtlUoA-bio42zeWZefYd7vM6HPB4nnA-kGnxJTJPtxXmuBoo#getting-started" target="_blank" rel="noopener noreferrer">入门</a>中概述的步骤。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hermes-unsupported-features-hermes-不支持的功能">Hermes Unsupported Features Hermes 不支持的功能<a class="hash-link" href="#hermes-unsupported-features-hermes-不支持的功能" title="标题的直接链接">​</a></h3><p>Hermes is the engine Origami uses to execute JavaScript. Here’s a <a href="https://github.com/facebook/hermes/blob/main/doc/Features.md" target="_blank" rel="noopener noreferrer">link</a> of its unsupported features. But broadly, Javascript File scripting is a logic-focused implementation and as such it doesn’t support the use of modules or external libraries.</p><p>Hermes 是 Origami 用来执行 JavaScript 的引擎。这里有一个<a href="https://github.com/facebook/hermes/blob/main/doc/Features.md" target="_blank" rel="noopener noreferrer">链接</a>它不支持的功能。</p><p>但总的来说，Javascript 文件脚本是一个以逻辑为中心的实现，因此它不支持使用模块或外部库。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unsupported-origami-types-不支持的-origami-类型">Unsupported Origami Types 不支持的 Origami 类型<a class="hash-link" href="#unsupported-origami-types-不支持的-origami-类型" title="标题的直接链接">​</a></h3><p>Not all Origami types are supported. See more details of the <a href="https://origami.design/documentation/concepts/ScriptingAPI.html#types" target="_blank" rel="noopener noreferrer">supported types</a>. Overall types that require a resource are not supported; Image or Video for example.</p><p>并不是所有的 Origami 类型都被支持。查看<a href="https://origami.design/documentation/concepts/ScriptingAPI.html#types" target="_blank" rel="noopener noreferrer">支持的类型</a>的更多详细信息。不支持需要资源的整体类型；例如图像或视频。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maximum-log-messages-最大日志消息">Maximum log messages 最大日志消息<a class="hash-link" href="#maximum-log-messages-最大日志消息" title="标题的直接链接">​</a></h3><p>The console holds a maximum of 50 messages, after that it will clear the old ones. A better way is to use <code>console.watch</code> It is more performant and alleviates the problem of saturating the console with messages.</p><p>控制台最多保存 50 条消息，之后将清除旧的消息。更好的方法是使用<code>console.watch</code>。它的性能更好，并缓解了控制台充斥着消息的问题。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kuaimeizheng/OrigamiStudio/tree/main/docs/documentation/Concepts/Scripting Basics.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->由 <b>蒯美政</b> <!-- -->于 <b><time datetime="2022-11-01T16:17:00.000Z">2022年11月1日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/OrigamiStudio/docs/documentation/Concepts/Math Expressions"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Math Expressions 数学表达式</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OrigamiStudio/docs/documentation/Concepts/States &amp; Pulses"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">States &amp; Pulses 状态 &amp; 脉冲</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-a-script-into-origami-在-origami-中编写脚本" class="table-of-contents__link toc-highlight">Getting a script into Origami 在 Origami 中编写脚本</a></li><li><a href="#getting-started-快速开始" class="table-of-contents__link toc-highlight">Getting started 快速开始</a><ul><li><a href="#breaking-down-the-necessary-pieces-of-a-script-分解步骤的必要部分" class="table-of-contents__link toc-highlight">Breaking down the necessary pieces of a script: 分解步骤的必要部分:</a><ul><li><a href="#create-the-patch-object-创建模块对象" class="table-of-contents__link toc-highlight">Create the patch object. 创建模块对象</a></li><li><a href="#define-its-inputs-and-outputs-定义其输入和输出" class="table-of-contents__link toc-highlight">Define its inputs and outputs. 定义其输入和输出</a></li><li><a href="#set-the-patch-properties-设置模块属性" class="table-of-contents__link toc-highlight">Set the patch properties. 设置模块属性</a></li><li><a href="#add-logic-添加逻辑" class="table-of-contents__link toc-highlight">Add logic. 添加逻辑</a></li><li><a href="#reading-and-writing-values-读写值" class="table-of-contents__link toc-highlight">Reading and writing values. 读写值</a></li><li><a href="#return-the-object-返回对象" class="table-of-contents__link toc-highlight">Return the object. 返回对象</a></li></ul></li></ul></li><li><a href="#example-例子" class="table-of-contents__link toc-highlight">Example 例子</a></li><li><a href="#debugging-调试" class="table-of-contents__link toc-highlight">Debugging 调试</a></li><li><a href="#modifying-a-script-修改脚本" class="table-of-contents__link toc-highlight">Modifying a Script 修改脚本</a><ul><li><a href="#considerations-when-modifying-a-script-修改脚本时的注意事项" class="table-of-contents__link toc-highlight">Considerations when modifying a script. 修改脚本时的注意事项。</a><ul><li><a href="#origami-must-be-opened-at-all-times-while-editing-a-javascript-patch-origami-必须在编辑-javascript-模块时一直打开" class="table-of-contents__link toc-highlight">Origami must be opened at all times while editing a JavaScript Patch. Origami 必须在编辑 JavaScript 模块时一直打开。</a></li><li><a href="#effectively-modifying-inputs--outputs-有效修改输入和输出" class="table-of-contents__link toc-highlight">Effectively modifying inputs &amp; outputs. 有效修改输入和输出。</a></li><li><a href="#duplicated-javascript-patch-复制-javascript-模块" class="table-of-contents__link toc-highlight">Duplicated JavaScript Patch. 复制 JavaScript 模块。</a></li></ul></li></ul></li><li><a href="#limitations-限制" class="table-of-contents__link toc-highlight">Limitations 限制</a><ul><li><a href="#hostbrowser-calls-主机浏览器调用" class="table-of-contents__link toc-highlight">Host/Browser calls. 主机/浏览器调用。</a></li><li><a href="#modules-模块" class="table-of-contents__link toc-highlight">Modules 模块</a></li><li><a href="#hermes-unsupported-features-hermes-不支持的功能" class="table-of-contents__link toc-highlight">Hermes Unsupported Features Hermes 不支持的功能</a></li><li><a href="#unsupported-origami-types-不支持的-origami-类型" class="table-of-contents__link toc-highlight">Unsupported Origami Types 不支持的 Origami 类型</a></li><li><a href="#maximum-log-messages-最大日志消息" class="table-of-contents__link toc-highlight">Maximum log messages 最大日志消息</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Origami Studio, Personal. Built with kuaimeizheng.</div></div></div></footer></div>
<script src="/OrigamiStudio/assets/js/runtime~main.19cc27ee.js"></script>
<script src="/OrigamiStudio/assets/js/main.f829999a.js"></script>
</body>
</html>